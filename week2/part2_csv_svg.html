<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 csv exception and js function</title>
        <script type="text/javascript" src="../d3/d3.js"></script>
    </head>
    <body>
		<script type="text/javascript">
            // Your beautiful D3 code will go here
			var dataset;
			var textStyle = function(data) {
				d3.select("body").selectAll("p")
				.data(data)
				.enter()
				.append("p")
				.text(function(d) {
					return "I can count up to " + d.Data;
				})
				.style("color", function(d) {
					if (parseInt(d.Data) > 15) {	//Threshold of 15
						return "red";
					} else {
						return "black";
					}
				});
			}

			d3.csv("num.csv", function(error, data) {
				if (error) {
					console.log(error);				
				} else {
					console.log(data);				
				}
				dataset = data;
				textStyle(dataset);
			});
        </script>
    </body>
	<body>
		<svg width="500" height="100">
			<rect x="80" y="0" width="80" height="80" opacity="0.10" stroke="blue" stroke-width="2"/>
			<rect x="60" y="5" width="80" height="80" opacity="0.25" stroke="blue" stroke-width="2"/>
			<rect x="40" y="10" width="80" height="80" opacity="0.5" stroke="blue" stroke-width="2"/>
			<rect x="20" y="15" width="80" height="80" opacity="0.75" stroke="blue" stroke-width="2"/>
			<rect x="0" y="20" width="80" height="80" opacity="1.0" stroke="blue" stroke-width="2"/>
		</svg>
	</body>
</html>
